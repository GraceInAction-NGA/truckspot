<!DOCTYPE html>
<html>

<head>
  <title>Truck Spot</title>

{{>head}}

  <link rel="stylesheet" type="text/css" href="../css/styles.css">
  <link href="https://fonts.googleapis.com/css?family=Montserrat:400,500i,600,700,900i" rel="stylesheet">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.0.3/dist/leaflet.css" integrity="sha512-07I2e+7D8p6he1SIM+1twR5TIrhUQn9+I6yjqD53JQjFiMf8EtC93ty0/5vJTZGF8aAocvHYNEDJajGdNx1IsQ==" crossorigin="" />
  <script src="https://unpkg.com/leaflet@1.0.3/dist/leaflet.js" integrity="sha512-A7vV8IFfih/D732iSSKi20u/ooOfj/AGehOKq0f4vLT1Zr2Y+RX7C+w8A1gaSasGtRUZpF/NZgzSAu4/Gc41Lg==" crossorigin=""></script>

</head>

<body>
  <header>
  {{>header}}

<div class="container" id="footer">  
  <div class="row">
    <div class="col-xs-4 col-sm-2">
      <div class="form-group">
          <select id="langSelector" class="form-control">
            <option value="en">English</option>
            <option value="sp">Espanol</option>
          </select>
      </div>
    </div>
  </div>
</div>

  <script>
    $(function () {
      const getLang = () => {
        const url = window.location.href.split("/");
        return url[url.length - 2];
      };

      $("#langSelector").change(function () {
        const val = $(this).val();
        const curLang = getLang();
        window.location.href = window.location.href.replace(`/${curLang}/`, `/${val}/`);
      });

      const curLang = getLang();

      $(`#langSelector option[value='${curLang}']`).prop("selected", true);
    })
  </script>
</header>

  <div class="container">
    <div id="text-box">

      {{>submit}}

      {{>body}}

      {{>map}}

      {{>coalition}}
      
    </div>
  </div>

  <script type="text/javascript" src="../js/map.js"></script>
  <script>
    var map_text = {{{json map_text}}};
    createMap(map_text)
  </script>

</body>
</html>
